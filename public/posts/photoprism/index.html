<!doctype html><html lang=en-US><head><meta http-equiv=X-Clacks-Overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://jschall.net/images/favicon.png><title>Run yourself a cloud at home | Jan's site</title>
<meta name=title content="Run yourself a cloud at home"><meta name=description content="How I run Photoprism on my own homeserver to backup my photos without sharing my data with third parties"><meta name=keywords content="linux,homeserver,photoprism,docker,"><meta property="og:url" content="https://jschall.net/posts/photoprism/"><meta property="og:site_name" content="Jan's site"><meta property="og:title" content="Run yourself a cloud at home"><meta property="og:description" content="How I run Photoprism on my own homeserver to backup my photos without sharing my data with third parties"><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-04-28T00:00:00+00:00"><meta property="article:modified_time" content="2024-04-28T00:00:00+00:00"><meta property="article:tag" content="Linux"><meta property="article:tag" content="Homeserver"><meta property="article:tag" content="Photoprism"><meta property="article:tag" content="Docker"><meta property="og:image" content="https://jschall.net/images/share.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://jschall.net/images/share.png"><meta name=twitter:title content="Run yourself a cloud at home"><meta name=twitter:description content="How I run Photoprism on my own homeserver to backup my photos without sharing my data with third parties"><meta itemprop=name content="Run yourself a cloud at home"><meta itemprop=description content="How I run Photoprism on my own homeserver to backup my photos without sharing my data with third parties"><meta itemprop=datePublished content="2024-04-28T00:00:00+00:00"><meta itemprop=dateModified content="2024-04-28T00:00:00+00:00"><meta itemprop=wordCount content="915"><meta itemprop=image content="https://jschall.net/images/share.png"><meta itemprop=keywords content="Linux,Homeserver,Photoprism,Docker"><meta name=referrer content="no-referrer-when-downgrade"><style>body{font-family:Verdana,sans-serif;margin:auto;padding:20px;max-width:720px;text-align:left;background-color:#333;word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:#ddd}h1,h2,h3,h4,h5,h6,strong,b{color:#eee}a{color:#8cc2dd}.title{text-decoration:none;border:0}.title span{font-weight:400}nav a{margin-right:10px}textarea{width:100%;font-size:16px;background-color:#252525;color:#ddd}input{font-size:16px;background-color:#252525;color:#ddd}content{line-height:1.6}table{width:100%}img{max-width:100%}code{padding:2px 5px;background-color:#777}pre code{color:#ddd;display:block;padding:20px;white-space:pre-wrap;font-size:14px;overflow-x:auto}div.highlight pre{background-color:initial;color:initial}div.highlight code{background-color:unset;color:unset}blockquote{border-left:1px solid #999;color:#ccc;padding-left:20px;font-style:italic}footer{padding:25px;text-align:center}.helptext{color:#aaa;font-size:small}.errorlist{color:#eba613;font-size:small}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:#8b6fcb}#webmentions ul{list-style:none;margin:0;padding:0}</style><link rel=webmention href=https://webmention.io/jschall.net/webmention><link rel=pingback href=https://webmention.io/jschall.net/xmlrpc><link rel=authorization_endpoint href=https://indieauth.com/auth><link rel=token_endpoint href=https://tokens.indieauth.com/token></head><body><header><a href=/ class=title><h2>Jan's site</h2></a><nav><a href=/>[Home]</a>
<a href=/posts>[Posts]</a>
<a href=/photos>[Photos]</a>
<a href=https://github.com/jschxll rel=me>[Git]</a></nav></header><main><h1>Run yourself a cloud at home</h1><p><i><time datetime=2024-04-28 pubdate>28 Apr, 2024</time></i></p><content class=h-card><p>In recent weeks, I have been using my own cloud to back up my photos and videos from my smartphone and laptop by using a containerized Photoprism instance. Today, I want to share how I set up my server and Docker environment to get everything running.</p><h2 id=installing-the-servers-operating-system>Installing the Server&rsquo;s Operating System</h2><p>First, you should use a separate computer so your own cloud is always accessible when you need to access your photos. I had an old laptop lying around that I used, but you can also use a cloud server. To make management easier, Ubuntu Server is a good choice. That&rsquo;s why I used it to run my photo cloud. Download Ubuntu Server on this site by clicking the download button.</p><p>Next, after the ISO file is downloaded, you need to flash the file onto a USB stick. To do this, download the BalenaEtcher tool. Once BalenaEtcher is successfully installed on your system, it&rsquo;s time to flash the ISO file onto the USB stick. Open BalenaEtcher, select &ldquo;Flash from File,&rdquo; and find your downloaded ISO. Then select your USB stick and press &ldquo;Flash!&rdquo;. This process can take some time, so be patient. After the flashing process, you will receive a message indicating that you can remove your USB stick.
Now it&rsquo;s time to install Ubuntu on your server. Insert the boot device (the USB stick) into your computer that will be used as a server and press ESC during boot. In the displayed menu, you should see the name of the USB stick, which you now select by pressing ENTER. If the first boot doesn&rsquo;t work, please check in the BIOS if Secure Boot is disabled and try again. Now follow the instructions in the Ubuntu Server installation menu. Make sure to enable the OpenSSH client during the installation so we can interact with our server later.</p><h2 id=post-installation>Post Installation</h2><p>After installing Ubuntu on your server, it&rsquo;s time to install the services we need to create a private cloud. But first, we need to access our server. We can use SSH for this. So open the terminal on your device (not the server) and enter:
<code>ssh YOUR_USER_NAME@SERVER_IP_ADRESS</code>
Now you have full access to the server. First, update the repositories with: <code>sudo apt-get update && sudo apt-get upgrade -y</code> to have the latest mirrors.</p><h2 id=installing-docker-and-photoprism>Installing Docker and Photoprism</h2><p>You can easily install Docker with this command: <code>sudo apt-get install docker.io</code>. Then we want to install the Docker Compose plugin so we can deploy the Photoprism instance with a simple YAML file. To do this, enter: <code>sudo apt-get install docker-compose-plugin</code> and install the package. You can check if the installation was successful by displaying the Docker Compose version with the following command: <code>docker compose version</code>.
After installing Docker Compose, we can finally install Photoprism itself. For this, I have prepared a docker-compose.yml file that you can simply clone:<code>git clone https://github.com/j-schall/photoprism-docker-compose.git</code>
Modify the file to customize it and set strong passwords. Pay special attention when setting up your PHOTOPRISM_USER_PASSWORD. It must be the same as the MARIADB_USER_PASSWORD as well as the username.
Now go to the directory where you saved the cloned docker-compose.yml file and run it with: <code>sudo docker compose up -d</code> . Check whether the container is running with: <code>sudo docker ps </code>. There you will also find the port on which the Photoprism web interface is running.</p><h2 id=setting-up-syncthing>Setting Up Syncthing</h2><p>If you have already opened the docker-compose file, you might have seen that Syncthing listens on port 8384. Open the Syncthing web interface by entering YOUR_SERVER_IP_ADDRESS:8384. There you can set a strong password.
The next step varies. If you want to sync your photos and videos from your smartphone, download the Syncthing app from the Play Store. Unfortunately, there is no official Syncthing app for iOS yet. When you open the app, do the following:</p><ol><li>Go to the device menu and press the + button.</li><li>Next to the text field for the device ID, there should be a QR code icon. Press it.</li><li>Go back to the Syncthing web interface of your server.</li><li>Press the actions menu &lt; Device ID.</li><li>Scan the QR code with your Syncthing smartphone app and give it a name.</li><li>After a few seconds, a message should appear on the server&rsquo;s web interface where you confirm that it is your device.</li><li>Create a new folder in the smartphone app and link it to your photo directory.
Now the photos should be synced with your server.</li></ol><h2 id=introduction-to-photoprism>Introduction to Photoprism</h2><p>Once the photos from your smartphone are synced with the Syncthing instance on your server, we only need to import them into Photoprism. To do this, log into the Photoprism web interface, where you will find the &ldquo;Files&rdquo; section on the right sidebar. Click &ldquo;Import&rdquo; and select all your folders. After this process, you should see all your photos from your smartphone.</p><p>Congratulations üéâ You have just built your own cloud!</p><h2 id=tipps>Tipps</h2><h3 id=use-lan-instead-of-wlan>Use LAN Instead of WLAN</h3><p>I would recommend using LAN instead of Wi-Fi. It is more stable and faster for uploading and downloading files. Additionally, it is less complex during the Ubuntu Server installation process as it is recognized directly by Ubuntu.</p><h3 id=keep-the-laptop-running-when-closing-the-lid>Keep the Laptop Running When Closing the Lid</h3><p>If you use a laptop as your server, it usually shuts down when you close the display. However, you can avoid this by following these configuration steps:</p><ol><li>Edit the file <code>/etc/systemd/logind.conf</code></li><li>Change <code>#HandleLidSwitch=suspend</code> to <code>HandleLidSwitch=ignore</code></li><li>Make sure the file contains the following: <code>LidSwitchIgnoreInhibited=no</code></li><li>Restart the operating system with: <code>sudo service systemd-logind restart</code></li></ol></content><p><a href=https://jschall.net/posts/linux/>#Linux</a>
<a href=https://jschall.net/posts/homeserver/>#Homeserver</a>
<a href=https://jschall.net/posts/photoprism/>#Photoprism</a>
<a href=https://jschall.net/posts/docker/>#Docker</a></p><p>You have written a <strong>response</strong>? Post it <a href=https://webmention.io/jschall.net/webmention>here</a>!</p></main><footer><span>Made with</span> <a class=footer-link href=https://github.com/janraasch/hugo-bearblog/>Hugo  ï‚Ä¢·¥•‚Ä¢ î Bear</a>
|
<a class=footer-link href=/index.xml>RSS</a>
|
<a class=footer-link href=/legal-notice>legal notice</a>
|
<a class=footer-link href=/terms-of-privacy>terms of privacy</a><br><a class=footer-link href=https://xn--sr8hvo.ws/previous>‚Üê</a>
<span>An</span> <a class=footer-link href=https://xn--sr8hvo.ws>IndieWeb Webring</a> üï∏üíç
<a class=footer-link href=https://xn--sr8hvo.ws/next>‚Üí</a><style>.footer-link{font-size:small}span{font-size:small}</style></footer></body></html>